import{a as i,b as s,c as a,d as r}from"./chunk.FWYUHKRF.js";import{LitElement as u}from"lit";import{property as d}from"lit/decorators.js";var m,h,g,n=class extends u{constructor(){super(...arguments);this.name="hot-tracking";a(this,m,"");a(this,h,"");a(this,g,"https://matomo.hotosm.org")}get siteId(){return s(this,m)}set siteId(e){r(this,m,e)}get domain(){return s(this,h)}set domain(e){r(this,h,e)}get matomoURL(){return s(this,g)}set matomoURL(e){r(this,g,e)}agree(){(window._paq=window._paq||[]).length}disagree(){let e=window._paq=window._paq||[];e.length!==0&&e.push(["forgetConsentGiven"])}connectedCallback(){if(super.connectedCallback(),window.location.hostname!==this.domain){console.warn(`Matomo init failed. ${window.location.hostname} does not match ${this.domain}.`);return}let e=this.siteId;if(e.length===0||this.domain.length===0){console.warn("Matomo init failed. No site id or domains provided.");return}console.log(`Setting Matomo tracking for site=${e} domain=${this.domain}`);let t=window._paq=window._paq||[];t.push(["requireConsent"]),t.push(["setDomains",[this.domain]]),t.push(["trackPageView"]),t.push(["enableLinkTracking"]),t.push(["trackVisibleContentImpressions"]),function(p){t.push(["setTrackerUrl",`${p}/matomo.php`]),t.push(["setSiteId",e]);let l=document,c=l.createElement("script"),o=l.getElementsByTagName("script")[0];(o==null?void 0:o.parentNode)!=null?(c.async=!0,c.src=`${p}/matomo.js`,o.parentNode.insertBefore(c,o)):console.warn("Script insertion failed. Parent node is null.")}(this.matomoURL)}};m=new WeakMap,h=new WeakMap,g=new WeakMap,i([d({type:String,attribute:"site-id"})],n.prototype,"siteId",1),i([d({type:String})],n.prototype,"domain",1),i([d({type:String})],n.prototype,"matomoURL",1);var k=n;customElements.define("hot-tracking",n);export{n as a,k as b};
